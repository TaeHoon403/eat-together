<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Report">
	<insert id="newReport">
		insert into report values(report_seq.nextval,#{category},#{id},#{report_id},#{title},#{content},sysdate,#{parent_seq},0)
	</insert>
	<select id="checkDupl" resultType="int">
		select count(*) from report where category=#{category} and id=#{id} and parent_seq=#{parent_seq}
	</select>
	
	<select id="getListCount"  resultType="int">
		select count(*) from report
	</select>
	
	<!-- 주제분류 네비카운트 -->
	<select id="getCount" resultType="int">
		select count(*) from report where category=#{category}
	</select>
	<!-- 주제분류 select문 -->
	<select id="ListByCategory" resultType="coma.spring.dto.ReportDTO">
		select * from(select
		report.*,row_number() over(order by report_date desc)
		rnum from report where
		category=#{category}) where rnum between
		#{start} and #{end}
	</select>
</mapper> 
   